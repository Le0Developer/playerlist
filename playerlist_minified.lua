local e="LeoDeveloper"local t="1.1.0"local a=""for N=1,16 do local S=math.random(1,16)a=a.. ("0123456789abcdef"):sub(S,S)end local o={}local i={}local n={}local s={}local h=gui.Reference("Menu")local r=300 local d=gui.Tab(gui.Reference("Misc"),"playerlist."..tostring(a),"Player List")local l={x=8,y=8,w=r,h=0}local u=gui.Groupbox(d,"Select a player",l.x,l.y,l.w,l.h)local c=gui.Listbox(u,"players",440)do local N=gui.Button(u,"Clear",function()c:SetOptions()s={}n={}end)N:SetPosX(188)N:SetPosY(-42)N:SetWidth(80)end local m={x=l.x+l.w+4,y=l.y,w=618-r,h=0}local f=gui.Groupbox(d,"Per Player Settings",m.x,m.y,m.w,m.h)local w w=function(N)return{set=function(S,H)N.settings[S]=H if#n>0 and n[c:GetValue()+1]==N.info.uid then return i[S].set(H)end end,get=function(S)return N.settings[S]end}end plist={gui={Checkbox=function(N,S,H)local R=gui.Checkbox(f,"settings."..tostring(N),S,H)i[N]={set=function(D)return R:SetValue(D)end,get=function()return R:GetValue()end,default=H}for D,L in pairs(s)do L.settings[N]=H end table.insert(o,R)return R end,Slider=function(N,S,H,R,D,L)local U=gui.Slider(f,"settings."..tostring(N),S,H,R,D,L or 1)i[N]={set=function(C)return U:SetValue(C)end,get=function()return U:GetValue()end,default=H}for C,M in pairs(s)do M.settings[N]=H end table.insert(o,U)return U end,ColorPicker=function(N,S,H,R,D,L)local U=gui.ColorPicker(f,"settings."..tostring(N),H,R,D,L)i[N]={set=function(C)return U:SetValue(unpack(C))end,get=function()return{U:GetValue()}end,default={H,R,D,L}}for C,M in pairs(s)do M.settings[N]={H,R,D,L}end table.insert(o,U)return U end,Text=function(N,S)local H=gui.Text(f,S)local R=S i[N]={set=function(D)H:SetText(D)R=D end,get=function()return R end,default=S}for D,L in pairs(s)do L.settings[N]=S end table.insert(o,S)return S end,Combobox=function(N,S,...)local H=gui.Combobox(f,"settings."..tostring(N),S,...)i[N]={set=function(R)return H:SetValue(R)end,get=function()return H:GetValue()end,default=0}for R,D in pairs(s)do D.settings[N]=0 end table.insert(o,H)return H end,Button=function(N,S)local H=gui.Button(f,N,function()if#n>0 then S(n[c:GetValue()+1])else S()end end)table.insert(o,H)return H end,Editbox=function(N,S)local H=gui.Editbox(f,N,S)i[N]={set=function(R)return H:SetValue(R)end,get=function()return H:GetValue()end,default=0}for R,D in pairs(s)do D.settings[N]=0 end table.insert(o,H)return H end,Multibox=function(N)local S=gui.Multibox(f,N)table.insert(o,S)return S end,Multibox_Checkbox=function(N,S,H,R)local D=gui.Checkbox(N,"settings."..tostring(S),H,R)i[S]={set=function(L)return D:SetValue(L)end,get=function()return D:GetValue()end,default=R}for L,U in pairs(s)do U.settings[S]=R end return D end},GetByUserID=function(N)return w(s[N])end,GetByIndex=function(N)local S=client.GetPlayerInfo(N)if S~=nil then return w(s[S["UserID"]])end for H,R in pairs(s)do if R.info.index==N then return w(R)end end end}local y=nil callbacks.Register("Draw","playerlist.callbacks.Draw",function()if not h:IsActive()then return end if#n==0 then for N=1,#o do local S=o[N]S:SetDisabled(true)end y=nil return elseif y==nil then for N=1,#o do local S=o[N]S:SetDisabled(false)end end if y~=c:GetValue()then y=c:GetValue()local N=s[n[c:GetValue()+1]].settings for S,H in pairs(i)do H.set(N[S])end else local N=s[n[c:GetValue()+1]].settings for S,H in pairs(i)do N[S]=H.get()end end end)local p=nil callbacks.Register("CreateMove","playerlist.callbacks.CreateMove",function(N)if engine.GetMapName()~=p then p=engine.GetMapName()c:SetOptions()s={}n={}end local S=entities.FindByClass("CCSPlayer")for H=1,#S do local R=S[H]local D=client.GetPlayerInfo(R:GetIndex())["UserID"]if s[D]==nil then table.insert(n,D)s[D]={info={nickname=R:GetName(),uid=D,index=R:GetIndex()},settings={}}local L=s[D].settings for U,C in pairs(i)do L[U]=C.default end c:SetOptions(unpack((function()local U={}local C=1 for M,F in ipairs(n)do U[C]=s[F].info.nickname C=C+1 end return U end)()))elseif s[D].info.nickname~=R:GetName()then s[D].info.nickname=R:GetName()c:SetOptions(unpack((function()local L={}local U=1 for C,M in ipairs(n)do L[U]=s[M].info.nickname U=U+1 end return L end)()))end end end)http.Get("https://raw.githubusercontent.com/Le0Developer/playerlist/master/version",function(N)if not N then return end if N==t then return end local S=190 local H=gui.Groupbox(d,"Update Available",l.x,l.y,618,S)local R=gui.Text(H,"Current version: "..tostring(t).."\nLatest version: "..tostring(N))local D=gui.Checkbox(H,"updater.minified","Download minified version",false)local L do local U=gui.Button(H,"Update",function()R:SetText("Updating...")L:SetDisabled(true)http.Get(((function()if D:GetValue()then return"https://raw.githubusercontent.com/Le0Developer/playerlist/master/playerlist_minified.lua"else return"https://raw.githubusercontent.com/Le0Developer/playerlist/master/playerlist.lua"end end)()),function(C)if C then R:SetText("Saving...")do local M=file.Open(GetScriptName(),"w")M:Write(C)M:Close()end return R:SetText("Updated to version: "..tostring(N)..".\nReload `"..tostring(GetScriptName()).."` for changes to take effect.")else R:SetText("Failed.")return L:SetDisabled(false)end end)end)U:SetWidth(290)L=U end do local U=gui.Button(H,"Open Changelog in Browser",function()return panorama.RunScript("SteamOverlayAPI.OpenExternalBrowserURL( 'https://github.com/Le0Developer/playerlist/blob/master/changelog.md' );")end)U:SetWidth(290)U:SetPosX(300)U:SetPosY(78)end l.y=l.y+S u:SetPosY(l.y)m.y=m.y+S return f:SetPosY(m.y)end)do local N=plist.gui.Combobox("resolver.type","Resolver","On","Off","Manual (LBY Override)")N:SetDescription("Choose a resolver for this player.")end do local N=plist.gui.Slider("resolver.lby_override","LBY Override Value",0,-180,180)N:SetDescription("The LBY value for resolving when using manual resolver.")end callbacks.Register("AimbotTarget","playerlist.plugins.Resolver.AimbotTarget",function(N)if not N:GetIndex()then return end local S=plist.GetByIndex(N:GetIndex())if S.get("resolver.type")==0 then return gui.SetValue("rbot.accuracy.posadj.resolver",true)else return gui.SetValue("rbot.accuracy.posadj.resolver",false)end end)callbacks.Register("CreateMove","playerlist.plugins.Resolver.CreateMove",function(N)local S=entities.GetLocalPlayer()local H=entities.FindByClass("CCSPlayer")for R=1,#H do local D=false repeat local L=H[R]if not L:IsAlive()then D=true break end local U=plist.GetByIndex(L:GetIndex())if U.get("resolver.type")==2 then L:SetProp("m_flLowerBodyYawTarget",(L:GetProp("m_angEyeAngles").y+U.get("resolver.type")+180)%360-180)end D=true until true if not D then break end end end)local v=nil local b=false callbacks.Register("AimbotTarget","playerlist.plugins.Priority.AimbotTarget",function(N)if not N:GetIndex()then return end if v and N:GetIndex()~=v:GetIndex()then if b then gui.SetValue("rbot.aim.target.lock",false)end v=N b=false elseif b then return gui.SetValue("rbot.aim.target.fov",180)end end)do local N=plist.gui.Combobox("targetmode","Targetmode","Normal","Friendly","Priority")N:SetDescription("Mode for targetting. NOTE: Priority on teammates attack them.")end local g=3 local k={}callbacks.Register("CreateMove","playerlist.plugins.Priority.CreateMove",function(N)local S=entities.GetLocalPlayer()local H=entities.FindByClass("CCSPlayer")for R=1,#H do local D=false repeat local L=H[R]if not L:IsAlive()then D=true break end local U=plist.GetByIndex(L:GetIndex())local C=client.GetPlayerInfo(L:GetIndex())["UserID"]if U.get("targetmode")==0 and k[C]then L:SetProp("m_iTeamNum",L:GetProp("m_iPendingTeamNum"))k[C]=nil elseif U.get("targetmode")==1 then L:SetProp("m_iTeamNum",S:GetTeamNumber())k[C]=true elseif U.get("targetmode")==2 then if L:GetProp("m_iPendingTeamNum")==S:GetTeamNumber()then L:SetProp("m_iTeamNum",(S:GetTeamNumber()-1)%2+2)k[C]=true else if k[C]then L:SetProp("m_iTeamNum",L:GetProp("m_iPendingTeamNum"))k[C]=nil end if not b and L:GetTeamNumber()~=S:GetTeamNumber()then local M=S:GetAbsOrigin()+S:GetPropVector("localdata","m_vecViewOffset[0]")local F=L:GetHitboxPosition(5)engine.SetViewAngles((F-M):Angles())gui.SetValue("rbot.aim.target.fov",g)gui.SetValue("rbot.aim.target.lock",true)v=L b=true end end end D=true until true if not D then break end end end)callbacks.Register("FireGameEvent","playerlist.plugins.Priority.FireGameEvent",function(N)if N:GetName()=="player_death"and b then if client.GetPlayerIndexByUserID(N:GetInt("userid"))==v:GetIndex()then b=false v=nil gui.SetValue("rbot.aim.target.fov",180)return gui.SetValue("rbot.aim.target.lock",false)end end end)local q=plist.gui.Multibox("Force ...")do local N=plist.gui.Multibox_Checkbox(q,"force.baim","BAIM",false)N:SetDescription("Set's bodyaim to priority.")end do local N=plist.gui.Multibox_Checkbox(q,"force.safepoint","Safepoint",false)N:SetDescription("Shoots only on safepoint.")end local j={"asniper","hpistol","lmg","pistol","rifle","scout","shared","shotgun","smg","sniper","zeus"}local x={applied=false}local z z=function()if x.applied then print("[PLAYERLIST] WARNING: Force baim has already been applied.")end for N=1,#j do local S=j[N]if gui.GetValue("rbot.hitscan.mode."..tostring(S)..".bodyaim")~=1 then x[S]=gui.GetValue("rbot.hitscan.mode."..tostring(S)..".bodyaim")gui.SetValue("rbot.hitscan.mode."..tostring(S)..".bodyaim",1)end end x.applied=true end local _ _=function()if not x.applied then print("[PLAYERLIST] WARNING: Force baim hasn't been applied.")end for N,S in pairs(x)do local H=false repeat if N=="applied"then H=true break end gui.SetValue("rbot.hitscan.mode."..tostring(N)..".bodyaim",S)H=true until true if not H then break end end x={applied=false}end local E={applied=false}local T={"delayshot","delayshotbody","delayshotlimbs"}local A A=function()if E.applied then print("[PLAYERLIST] WARNING: Force safepoint has already been applied.")end for N=1,#j do local S=j[N]for H=1,#T do local R=T[H]if gui.GetValue("rbot.hitscan.mode."..tostring(S).."."..tostring(R))~=1 then E[tostring(S).."."..tostring(R)]=gui.GetValue("rbot.hitscan.mode."..tostring(S).."."..tostring(R))gui.SetValue("rbot.hitscan.mode."..tostring(S).."."..tostring(R),1)end end end E.applied=true end local O O=function()if not E.applied then print("[PLAYERLIST] WARNING: Force safepoint hasn't been applied.")end for N,S in pairs(E)do local H=false repeat if N=="applied"then H=true break end gui.SetValue("rbot.hitscan.mode."..tostring(N),S)H=true until true if not H then break end end E={applied=false}end local I=nil callbacks.Register("AimbotTarget","playerlist.plugins.FBSP.AimbotTarget",function(N)if not N:GetIndex()then return end I=N local S=plist.GetByIndex(N:GetIndex())if S.get("force.baim")then if not x.applied then z()end elseif x.applied then _()end if S.get("force.safepoint")then if not E.applied then return A()end elseif E.applied then return O()end end)callbacks.Register("FireGameEvent","playerlist.plugins.FBSP.FireGameEvent",function(N)if N:GetName()=="player_death"and I and client.GetPlayerIndexByUserID(N:GetInt("userid"))==I:GetIndex()then I=nil if x.applied then _()end if E.applied then return O()end end end)do local N=plist.gui.Checkbox("esp","ESP",false)N:SetDescription("Basic Box ESP.")end callbacks.Register("DrawESP","playerlist.plugins.PPE.DrawESP",function(N)local S=N:GetEntity()if not S:IsPlayer()then return end if plist.GetByIndex(S:GetIndex()).get("esp")then draw.Color(0x80,0x80,0x80,0xFF)return draw.OutlinedRect(N:GetRect())end end)